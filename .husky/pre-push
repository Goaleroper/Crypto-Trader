#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

# Get the current branch name
branch=$(git rev-parse --abbrev-ref HEAD)

# Check if the current branch is master
if [ "$branch" = "master" ]; then
  echo 'On master branch, bumping version and pushing tags'
  npm version patch
  git push --follow-tags
else
  echo 'Not on master branch, bumping version without tag'
  npm --no-git-tag-version version patch
  git add package.json
  git commit -m 'Bump version'
  git push
fi
